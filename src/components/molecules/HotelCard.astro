---
import { getLocale, t , getLangFromUrl } from '@/utils/i18n';
import CarHotel from '@/assets/car-hotel.svg';
import Time from '@/assets/time.svg';

const lang = getLangFromUrl(Astro.url);
const locale = getLocale(lang);

const { icon: Icon, hotelName, km, min, discount = null, description = null, link} = Astro.props;

---

<div class="hotel-card" role="group" aria-label={`Hotel ${hotelName}`}>
  <div class="hotel-card__header">
    {Icon ? <Icon class="hotel-card__main-icon" /> : null}
    <h5 class="hotel-card__title">{hotelName}</h5>
  </div>

  <div class="hotel-card__info" aria-hidden="false">
    <div class="hotel-card__info-item">
      <CarHotel class="hotel-card__small-icon-car"/>
      <p class="hotel-card__stat"><strong>{km}</strong> km</p>
    </div>

    <div class="hotel-card__info-item">
      <Time class="hotel-card__small-icon-clock"/>
      <p class="hotel-card__stat"><strong>{min}</strong> min</p>
    </div>
  </div>

  {discount ? (
    <div class="hotel-card__discount" aria-live="polite">
      <span class={"hotel-card__discount-badge hotel-card__discount--" + discount}>
        {discount}%  {t(locale, "travel.accommodation.hotelCard.discount")} <span>BODAMARIAYALEX</span>
      </span>
      
    </div>
  ) : null}

  <div class="hotel-card__text">
    {description ? (
      <>
        {description.text ? <p>{description.text}</p> : null}

        {description.list && description.list.length > 0 ? (
          <ul class="hotel-card__list">
            {description.list.map(item => <li>{item}</li>)}
          </ul>
        ) : null}
      </>
    ) : null}
  </div>

  <div class="hotel-card__actions">
    <a
    href={link} 
    target="_blank"
    rel="noopener noreferrer"
    class="hotel-card__button"
    >
      {t(locale, "travel.accommodation.hotelCard.button")}
    </a>
  </div>
</div>

<style lang="scss" scoped>
.hotel-card {
  width: 100%;
  display: flex;
  flex-direction: column;
  background-color: $color-red-light;
  border-radius: 1rem;
  border: 1px solid $color-red;
  align-items: center;
  justify-content: space-around;
  text-align: center;
  padding: 2rem;

  &__header {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
    justify-content: center;
  }

  &__main-icon {
    width: 48px;
    height: 48px;
  }

  &__title {
    font-family: $font-lato;
    text-transform: uppercase;
    font-weight: 300;
    font-size: $font-size-md;
    margin-bottom: 2rem;
  }

  &__info {
    display: flex;
    gap: 2rem;
    align-items: center;
    justify-content: center;
    color: $color-red;
    margin-bottom: 2rem;
  }

  &__info-item {
    display: flex;
    gap: .5rem;
    align-items: center;
  }

  &__small-icon-car {
    width: 2rem;
    height: auto;
  }

  &__small-icon-clock {
    width: 1.5rem;
    height: auto;
  }

  &__stat {
    margin: 0;
    font-family: $font-cormorant;
    font-weight: bold;
    font-size: $font-size-md;
  }

  &__discount {
    margin-bottom: 2rem;
    width: 100%;

  }

  &__discount-badge {
    display: inline-block;
    // width: 100%;
    padding: .6rem 1.5rem;
    border-radius: 2rem;
    // font-weight: 700;
    font-size: .9rem;
    border: 1px solid $color-red;
    color: $color-red;
  }

  &__text {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    width: 100%;
    text-align: center;
    font-family: $font-cormorant;
    font-size: $font-size-md;
    line-height: 1.5rem;
  }

  &__list {
  list-style: none;
  padding: 0;
  margin: 0;

  li {
    &::before {
      content: "â€¢";
      padding-right: 0.5rem;
      font-size: $font-size-md;   
      line-height: 1;
      color: currentColor;
    }
  }
}

  &__actions {
    display:flex;
    justify-content:center;
    margin-top: 2rem;
  }

  &__button {
    padding: .6rem 1.5rem;
    border-radius: 1.5rem;
    border: none;
    background: $color-red;
    font-family: $font-cormorant;
    font-size: $font-size-md;
    color: $color-white;
    cursor: pointer;
    font-weight: 700;
    text-decoration: none;
  }
}

/* Responsive */
@media (min-width: 720px) {
  .hotel-card { padding: 2rem; }
  .hotel-card__info { gap: 3rem; }
}
</style>
